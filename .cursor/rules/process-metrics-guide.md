# 프로세스 메트릭 측정 및 추가 가이드

## 개요

이 가이드는 Mermaid 프로세스 맵에 AS-IS/TO-BE 비교를 위한 메트릭을 추가하는 방법을 설명합니다.

**기본 원칙**:
- 프로세스 맵 구조는 `mermaid-flowchart.mdc` 지침을 따릅니다
- 메트릭 추가는 **선택 사항**입니다
- 메트릭 데이터는 **프로세스별로 개별 수집**이 필요합니다

---

## 단계적 접근 방법

### Phase 1: 시간만 측정 (시작 단계) ✅ 추천

**측정 항목**:
- ⏱️ 처리 시간 (평균, 최소, 최대)

**장점**:
- 즉시 시작 가능
- 측정이 간단 (스톱워치면 충분)
- 병목 구간 파악 가능
- AS-IS/TO-BE 비교 가능

**측정 방법**:
```
1. 스톱워치로 작업 시작/종료 시간 기록
2. 엑셀에 즉시 기록
3. 최소 10~20건 측정
4. 평균, 최소, 최대 계산
```

### Phase 2: 통과율 추가 (필요시)

**측정 항목**:
- 📊 통과율 = 이 노드를 거친 건수 ÷ 전체 건수 × 100

**측정 방법**:
```
1주일간 케이스별 건수 집계
- 전체 발권 건수: 100건
  └─ 자동 확정: 30건 (30%)
  └─ 수동 처리: 70건 (70%)
      ├─ 금액 불일치: 40건 (40%)
      ├─ 항공사 불일치: 20건 (20%)
      └─ 증빙서류: 15건 (15%)
```

### Phase 3: 비용 추가 (보고용)

**계산 방법**:
```
비용 = (처리시간 ÷ 60분) × 시간당 인건비

예시:
- 시간당 인건비: ₩30,000
- 처리 시간: 3분
- 비용 = (3 ÷ 60) × ₩30,000 = ₩1,500
```

---

## 사용자 워크플로우

### 1단계: 기본 프로세스 맵 생성

```
사용자: "발권 프로세스 만들어줘"
AI: [mermaid-flowchart.mdc 지침에 따라 기본 구조 생성]
```

### 2단계: 데이터 측정 (사용자가 수작업)

```
측정 시트 예시:
| 날짜 | 케이스ID | 노드명 | 시작 | 종료 | 소요시간 |
|------|---------|--------|------|------|---------|
| 1/2  | V001    | 미확정 사유 확인 | 09:00 | 09:03 | 3분 |
| 1/2  | V001    | 코멘트 검토 | 09:03 | 09:05 | 2분 |
| 1/2  | V001    | TL 연장 | 09:05 | 09:10 | 5분 |
```

### 3단계: 간단한 형식으로 데이터 제공

**방법 A: 간단한 리스트** (가장 쉬움)
```
노드별 시간:
- 미확정 사유 확인: 3분
- 코멘트 검토: 2분
- TL 연장: 5분
- 금액 안내 발송: 8분
- 고객 응답 대기: 180분
```

**방법 B: 표 형식**
```
| 노드명 | 시간 |
|--------|------|
| 미확정 사유 확인 | 3분 |
| 코멘트 검토 | 2분 |
| TL 연장 | 5분 |
```

**방법 C: CSV 형식**
```
미확정 사유 확인,3분
코멘트 검토,2분
TL 연장,5분
```

### 4단계: AI가 자동으로 맵에 삽입

```
사용자: "발권_프로세스.md에 메트릭 추가해줘"
[위 데이터 제공]

AI: [노드명 매칭 후 자동 삽입]
```

---

## 메트릭 표시 스타일

### 스타일 1: 시간만 (간결형) ✅ 추천

**노드 표시**:
```mermaid
B1["온라인: 미확정 사유 확인<br/>(3분)"]:::online
```

**상세 테이블**:
```markdown
| 노드명 | 평균 시간 | 최소 | 최대 |
|--------|----------|------|------|
| 미확정 사유 확인 | 3분 | 2분 | 7분 |
```

### 스타일 2: 시간 + 통과율

**노드 표시**:
```mermaid
B1["온라인: 미확정 사유 확인<br/>(3분 | 70%)"]:::online
```

**상세 테이블**:
```markdown
| 노드명 | 시간 | 통과율 |
|--------|------|--------|
| 미확정 사유 확인 | 3분 | 70% |
```

### 스타일 3: 시간 + 통과율 + 비용 (완전체)

**노드 표시**:
```mermaid
B1["온라인: 미확정 사유 확인<br/>(3분 | 70% | ₩1.5K)"]:::online
```

**상세 테이블**:
```markdown
| 노드명 | 시간 | 통과율 | 비용 |
|--------|------|--------|------|
| 미확정 사유 확인 | 3분 | 70% | ₩1,500 |
```

### 스타일 4: 별도 테이블 (다이어그램 깔끔)

**다이어그램**: 메트릭 없이 깔끔하게 유지

**별도 섹션 추가**:
```markdown
## 노드별 메트릭

| 노드명 | 시간 | 통과율 | 비용 |
|--------|------|--------|------|
| 미확정 사유 확인 | 3분 | 70% | ₩1,500 |
| 코멘트 검토 | 2분 | 70% | ₩1,000 |
```

---

## 프로세스 맵 문서 구조

### 기본 구조 (메트릭 없음)
```markdown
# 프로세스명

## 프로세스 개요
[설명]

## 프로세스 플로우차트
[Mermaid 다이어그램]

## 프로세스 상세 설명
[각 단계 설명]
```

### 시간 메트릭 포함 구조 ✅ 추천
```markdown
# 프로세스명

## ⏱️ 프로세스 시간 분석
| 지표 | AS-IS | TO-BE 목표 | 개선 목표 |
|------|-------|-----------|----------|
| 전체 평균 처리 시간 | 45분 | 15분 | -67% |

## 프로세스 개요
[설명]

## 프로세스 플로우차트 (처리 시간 포함)
[Mermaid 다이어그램 - 노드에 시간 표시]

## 경로별 총 처리 시간
### 자동 확정 경로
총 시간: 3분
- 자동 확정 처리: 1분
- 결제 및 발권: 2분

### 케이스 2: 금액 불일치
총 시간: 204분
- 미확정 사유 확인: 3분
- 코멘트 검토: 2분
...

## 노드별 처리 시간 상세
| 노드명 | 평균 시간 | 최소 | 최대 | 개선 목표 |
|--------|----------|------|------|----------|
| 미확정 사유 확인 | 3분 | 2분 | 7분 | 2분 |

## 🎯 시간 기반 개선 우선순위
| 순위 | 구간 | 현재 | 목표 | 절감 | 개선율 |
|-----|------|------|------|------|--------|
| 1 | 고객 응답 대기 | 180분 | 60분 | -120분 | -67% |

## 💡 주요 인사이트
- 병목 구간 Top 3
- 개선 효과
- 핵심 개선 포인트
```

### 풀 메트릭 포함 구조
```markdown
# 프로세스명

## 📊 프로세스 개선 효과 요약
| 지표 | AS-IS | TO-BE 목표 | 개선 목표 |
|------|-------|-----------|----------|
| 평균 처리 시간 | 45분 | 15분 | -67% |
| 자동 확정률 | 30% | 75% | +150% |
| 운영 인력 | 5명 | 2명 | -60% |

[이하 시간 메트릭 구조와 동일 + 통과율/비용 추가]
```

---

## 데이터 수집 템플릿

### 엑셀 수집 양식

```
| 날짜 | 케이스ID | 노드명 | 시작시간 | 종료시간 | 소요시간(분) | 성공/실패 | 비고 |
|------|---------|--------|----------|----------|-------------|----------|------|
| 1/2 | V001 | 미확정 사유 확인 | 09:00 | 09:03 | 3 | 성공 | |
| 1/2 | V001 | 코멘트 검토 | 09:03 | 09:05 | 2 | 성공 | |
| 1/2 | V001 | TL 연장 | 09:05 | 09:10 | 5 | 성공 | |
```

### 집계 양식

```
| 노드명 | 측정1 | 측정2 | 측정3 | ... | 평균 | 최소 | 최대 |
|--------|------|------|------|-----|------|------|------|
| 미확정 사유 확인 | 3분 | 2분 | 4분 | ... | 3분 | 2분 | 7분 |
| 코멘트 검토 | 2분 | 1분 | 3분 | ... | 2분 | 1분 | 5분 |
```

---

## AI 처리 프로세스

### 사용자가 제공하는 정보
```
1. 대상 파일명 (예: 발권_프로세스.md)
2. 노드별 메트릭 데이터
   - 노드명 (프로세스 맵의 노드와 일치해야 함)
   - 측정값 (시간, 통과율, 비용 등)
```

### AI 자동 처리 단계
```
1. 기존 프로세스 맵 파일 읽기
2. 노드명 매칭 (사용자가 제공한 노드명 찾기)
3. 선택한 스타일로 메트릭 삽입
   - 노드 내부에 표시
   - 또는 별도 테이블 생성
4. 요약 통계 계산
5. 개선 우선순위 분석
6. 업데이트된 파일 생성
```

### 매칭 규칙
```
사용자 입력: "미확정 사유 확인: 3분"
AI 찾기: B1[온라인: 미확정 사유 확인]:::online
매칭: "미확정 사유 확인" 텍스트 매칭
변환: B1["온라인: 미확정 사유 확인<br/>(3분)"]:::online
```

---

## 예시

### 예시 1: 시간만 추가

**사용자 요청**:
```
발권_프로세스.md에 시간 메트릭 추가해줘

노드별 시간:
- 미확정 사유 확인: 3분
- 코멘트 검토: 2분
- TL 연장: 5분
- 금액 안내 발송: 8분
- 고객 응답 대기: 180분
- 최종 금액 재확인: 3분
- 확정 처리: 3분
```

**AI 출력**: `발권_프로세스_시간메트릭.md` 생성

### 예시 2: 시간 + 통과율 추가

**사용자 요청**:
```
발권_프로세스.md에 메트릭 추가해줘

| 노드명 | 시간 | 통과율 |
|--------|------|--------|
| 미확정 사유 확인 | 3분 | 70% |
| 코멘트 검토 | 2분 | 70% |
| TL 연장 | 5분 | 40% |
```

**AI 출력**: `발권_프로세스_메트릭.md` 생성

### 예시 3: 기존 파일에 메트릭 업데이트

**사용자 요청**:
```
발권_프로세스_시간메트릭.md에 통과율 추가해줘
시간당 인건비 ₩30,000 기준으로 비용도 계산해줘

통과율:
- 미확정 사유 확인: 70%
- 코멘트 검토: 70%
- TL 연장: 40%
```

**AI 출력**: 기존 파일에 통과율, 비용 추가

---

## 측정 가이드라인

### 처리 시간 측정 팁

1. **정확한 측정**
   - 작업 시작 즉시 타이머 시작
   - 작업 완료 즉시 타이머 종료
   - 중간에 다른 작업 하면 중단

2. **대기 시간 구분**
   - 작업 시간 ≠ 대기 시간
   - 고객 응답 대기는 별도 표시

3. **샘플 수**
   - 최소 10건 이상 측정
   - 특이 케이스 제외 (네트워크 장애 등)
   - 평균, 최소, 최대 모두 기록

### 통과율 측정 팁

1. **집계 기간**
   - 최소 1주일 (대표성 확보)
   - 월초/월말 등 특수 기간 고려

2. **케이스 분류**
   - 명확한 기준 정의
   - 중복 케이스 처리 방법 결정

### 비용 계산 팁

1. **인건비 산정**
   - 실제 급여 + 복리후생비
   - 또는 업계 평균 사용

2. **시스템 비용**
   - 무시 가능한 경우 생략
   - API 호출 비용 등은 별도 계산

---

## 주의사항

1. **노드명 정확히 일치**
   - 프로세스 맵의 노드 레이블과 정확히 동일해야 함
   - "온라인:" 접두사는 제외하고 매칭

2. **측정 단위 통일**
   - 시간: 분 단위 권장 (초, 시간 혼용 금지)
   - 비용: 원화(₩) 권장

3. **데이터 품질**
   - 특이값(outlier) 제거
   - 충분한 샘플 수 확보

4. **버전 관리**
   - AS-IS 측정 후 파일 보관
   - TO-BE 개선 후 재측정
   - 변경 이력 관리

---

## FAQ

### Q1. 꼭 모든 노드에 메트릭을 넣어야 하나요?
A. 아니요. 중요한 노드나 개선 대상 노드만 선택적으로 추가 가능합니다.

### Q2. 시간만 측정해도 충분한가요?
A. 네. 시간만으로도 병목 구간 파악과 AS-IS/TO-BE 비교가 충분히 가능합니다.

### Q3. 통과율을 정확히 모르면 어떻게 하나요?
A. 담당자 추정값("자주", "보통", "가끔") 수준으로 표시하거나 생략 가능합니다.

### Q4. 노드가 너무 많으면 다이어그램이 복잡해지지 않나요?
A. 스타일 4(별도 테이블)를 사용하여 다이어그램은 깔끔하게 유지하고, 메트릭은 표로 관리하세요.

### Q5. AS-IS와 TO-BE를 어떻게 구분하나요?
A. 두 가지 방법:
   - 방법 1: 파일을 두 개 생성 (발권_프로세스_ASIS.md, 발권_프로세스_TOBE.md)
   - 방법 2: 하나의 파일에 비교 테이블 포함

---

## 참고 파일 예시

프로젝트 내 예시 파일:
- `발권_프로세스/발권_프로세스.md` - 기본 프로세스 맵 (메트릭 없음)
- `발권_프로세스/발권_프로세스_시간메트릭.md` - 시간 메트릭만 포함 ✅
- `발권_프로세스/발권_프로세스_메트릭.md` - 풀 메트릭 포함

---

**마지막 업데이트**: 2024-12-30

