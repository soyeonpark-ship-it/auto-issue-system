flowchart TD
    %% 시작 노드
    Start([온라인: 연동 신규 상품 등록 시작]):::online

    %% 매니저 시스템 - 초기 접근
    subgraph Manager1["매니저 - T&A 연동 상품"]
        direction TB
        A1[온라인: T&A 연동 상품 버튼 클릭]:::online
        A2[온라인: 검수 필요 공급사 선택]:::online
    end

    %% 공급사 상품 가져오기 1
    subgraph Manager2["매니저 - 공급사 상품 가져오기"]
        direction TB
        B1[온라인: 공급사 상품 가져오기 버튼 클릭]:::online
        B2[온라인: 공급사 원본 ID 입력<br/>1개 또는 여러개 ,로 구분]:::online
    end

    %% 중복 체크 조건
    Cond1{온라인: 중복 상품 존재 여부}:::online

    %% 중복 시 처리
    subgraph ErrorFlow["매니저 - 중복 처리"]
        direction TB
        E1[온라인: 에러 문구 노출]:::online
        E2[온라인: 공급사 ID로 재검색]:::online
    end

    %% 상품 등록 진행
    subgraph Manager3["매니저 - 연동 상품"]
        direction TB
        C1[온라인: 상품 등록 완료 문구 확인]:::online
        C2[온라인: 연동 상품 ID 검색]:::online
    end

    %% 마리트 상품 생성
    subgraph Manager4["매니저 - 상품 생성"]
        direction TB
        D1[온라인: 마리트 상품 생성 버튼 클릭]:::online
        D2[온라인: 표준 카테고리 선택 필수]:::online
        D3[온라인: 연동 상품 등록하기 버튼 클릭]:::online
    end

    %% 파트너 페이지 - 상품 정보 입력
    subgraph Partner1["파트너 - 상품 상세 정보"]
        direction TB
        F1[온라인: 마리트 상품 ID 클릭]:::online
        F2[온라인: 필수 값 입력<br/>대표도시, 상품명, 상품사진]:::online
        F3[온라인: 상품 소개 입력]:::online
        F4[온라인: 이동수단/소요시간/언어 입력]:::online
        F5[온라인: 공지사항/만나는시간/장소 입력]:::online
        F6[온라인: 포함/불포함/필수안내 입력]:::online
    end

    %% 심사 요청 조건
    Cond2{온라인: 버튼 상태 확인}:::online

    %% 버튼 2개인 경우
    subgraph Partner2["파트너 - 심사 요청 절차"]
        direction TB
        G1[온라인: 상품 정보 수정 버튼 클릭]:::online
        G2[온라인: 심사요청 버튼 클릭]:::online
    end

    %% 버튼 1개인 경우
    subgraph Partner3["파트너 - 심사 요청"]
        direction TB
        H1[온라인: 심사요청 버튼 클릭]:::online
    end

    %% 매니저 최종 설정
    subgraph Manager5["매니저 3.0 - 최종 설정"]
        direction TB
        I1[온라인: 예약 정보 설정<br/>예약가능시간 0, 바로예약]:::online
        I2[온라인: 취소환불 정보 수정<br/>템플릿 미사용]:::online
        I3[온라인: 취소환불 문구 입력]:::online
        I4[온라인: 취소요청 가능 여부 설정]:::online
    end

    %% 대표가 설정 조건
    Cond3{온라인: 공급사 KKDAY 여부}:::online

    %% KKDAY인 경우
    subgraph NotifyFlow["매니저 - 슬랙 노티"]
        direction TB
        J1[온라인: 온세일 시트에 대표가 등록필요 기재]:::online
        J2[온라인: 슬랙 스레드 노티]:::online
    end

    %% KLOOK인 경우
    subgraph DirectFlow["매니저 - 바로 판매"]
        direction TB
        K1[온라인: 판매가 정책 등록 없이 진행]:::online
    end

    %% 기타 공급사인 경우
    subgraph NormalFlow["매니저 - 일반 진행"]
        direction TB
        L1[온라인: 심사 요청]:::online
    end

    %% 최종 판매 시작
    subgraph Manager6["매니저 - 판매 시작"]
        direction TB
        M1[온라인: 판매 시작 버튼 클릭]:::online
    end

    %% 종료 노드
    End([온라인: 연동 신규 상품 등록 완료]):::online

    %% 연결 흐름
    Start --> A1
    A1 --> A2
    A2 --> B1
    B1 --> B2
    B2 --> Cond1

    %% 중복 체크
    Cond1 -->|중복| E1
    E1 --> E2
    E2 --> B2
    Cond1 -->|중복 없음| C1

    %% 정상 흐름
    C1 --> C2
    C2 --> D1
    D1 --> D2
    D2 --> D3
    D3 --> F1
    F1 --> F2
    F2 --> F3
    F3 --> F4
    F4 --> F5
    F5 --> F6
    F6 --> Cond2

    %% 심사 요청 분기
    Cond2 -->|버튼 2개| G1
    G1 --> G2
    G2 --> I1
    Cond2 -->|버튼 1개| H1
    H1 --> I1

    %% 최종 설정
    I1 --> I2
    I2 --> I3
    I3 --> I4
    I4 --> Cond3

    %% 공급사별 분기
    Cond3 -->|KKDAY| J1
    J1 --> J2
    J2 --> M1
    
    Cond3 -->|KLOOK| K1
    K1 --> M1
    
    Cond3 -->|기타| L1
    L1 --> M1

    %% 최종 완료
    M1 --> End

    %% 스타일 정의
    classDef online fill:#FFF9C4,stroke:#FFD54F,stroke-width:2px,color:#000
    classDef offline fill:#FFE0B2,stroke:#FFB74D,stroke-width:2px,color:#000
